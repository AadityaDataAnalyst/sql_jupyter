# Open Jupyter notebook tab in editor
tabs: ["test.ipynb"]

# Launch terminal commands
terminals:
  [
    # Create dummy .ipynb with SQLite demo
    "echo '{\"cells\":[{\"cell_type\":\"code\",\"metadata\":{},\"source\":[\"import sqlite3\\nconn = sqlite3.connect(\\\"studentlab.db\\\")\\nc = conn.cursor()\\nc.execute(\\\"CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY, name TEXT, email TEXT)\\\")\\nc.execute(\\\"INSERT INTO users (name, email) VALUES (\\'Alice\\', \\'alice@example.com\\'), (\\'Bob\\', \\'bob@example.com\\')\\\")\\nconn.commit()\\nc.execute(\\\"SELECT * FROM users\\\")\\nprint(c.fetchall())\"],\"outputs\":[],\"execution_count\":null}],\"metadata\":{},\"nbformat\":4,\"nbformat_minor\":5}' > test.ipynb",

    # Install Jupyter Notebook (user level)
    "export PATH=\"$HOME/.local/bin:$PATH\" && pip install --user notebook && jupyter notebook test.ipynb --no-browser --port=1337 --ip=0.0.0.0 --NotebookApp.token='' --NotebookApp.password=''"
  ]

# Run button: Only for .py files
run-button: |
  if [[ "$$file" == *.py ]]; then
    python3 "$$file"
  else
    echo "‚ùå Only .py files are supported with Run button. Open notebooks at https://{{subdomain}}.run-code.com"
  fi

# Browser shortcut for Jupyter
browser-link: https://{{subdomain}}.run-code.com
